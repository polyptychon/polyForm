include form-input
include date-input
include select2
include select
include checkbox
include radio-group
include textarea
include validation-messages

mixin form-control(options)
  - options       = options               || {}

  - className     = options.class         || 'col-md-6'
  - inputClass    = options.inputClass    || 'form-control'
  - radioClass    = options.radioClass    || 'radio-inline'
  - name          = options.name          || 'control'
  - label         = options.label         || 'Ετικέτα'
  - placeholder   = options.placeholder   || label
  - autocomplete  = options.autocomplete  || name
  - type          = options.type          || 'text'
  - radioValues   = options.radioValues   || null
  - popover       = options.popover       || null

  - useLabel      = options.useLabel      || 'true'

  - multidate           = options.multidate           || null
  - forceParse          = options.forceParse          || null
  - todayHighlight      = options.todayHighlight      || null
  - autoclose           = options.autoclose           || null
  - multidateSeperator  = options.multidateSeperator  || null
  - format              = options.format              || 'dd/mm/yyyy'
  - language            = options.language            || null

  - select2Data   = options.select2Data   || null

  - select2Input       = type=='select2-input' ? name+'.uiSelect2QueryData' : null

  - uiSelect2Query                  = options.uiSelect2Query                || null
  - queryMapData                    = options.queryMapData                  || null
  - queryDataType                   = options.queryDataType                 || null
  - queryResultsArrayPath           = options.queryResultsArrayPath         || null
  - queryResultText                 = options.queryResultText               || null
  - queryResultId                   = options.queryResultId                 || null
  - queryResultChildText            = options.queryResultChildText          || null
  - queryResultChildId              = options.queryResultChildId            || null
  - queryResultChildrenPath         = options.queryResultChildrenPath       || null
  - queryResultIsParentSelectable   = options.queryResultIsParentSelectable || null
  - allowClear                      = options.allowClear                    || null
  - quietMillis                     = options.quietMillis                   || null
  - minimumInputLength              = options.minimumInputLength            || null
  - maximumInputLength              = options.maximumInputLength            || null
  - maximumSelectionSize            = options.maximumSelectionSize          || null
  - queryInitMessage                = options.queryInitMessage              || null
  - queryNoMatchesMessage           = options.queryNoMatchesMessage         || null
  - queryTooShortMessage            = options.queryTooShortMessage          || null
  - queryTooLongMessage             = options.queryTooLongMessage           || null
  - querySelectionTooBigMessage     = options.querySelectionTooBigMessage   || null
  - queryLoadMoreMessage            = options.queryLoadMoreMessage          || null
  - querySearchingMessage           = options.querySearchingMessage         || null

  - isUnique        = options.isUnique    || null  // Async Validation. Value must be a URL. Validation is done on server and must return json. example { "isUnique": "true" }
  - isUniqueMapData = options.mapData     || null  // Maps json data to isUnique url. example isUnique="test.json?param:value" isUniqueMapData="{value=true}"
  - isEqual         = options.isEqual     || null

  - ngRequired  = options.ngRequired  || 'true' // Sets required attribute if set to true
  - ngRequired  = ngRequired=='false' ? null : 'true'

  - ngMinlength = options.ngMinlength || null   // Sets minlength validation error key if the value is shorter than minlength.
  - ngMaxlength = options.ngMaxlength || null   // Sets maxlength validation error key if the value is longer than maxlength.
  - ngPattern   = options.ngPattern   || null   // Sets pattern validation error key if the value does not match the RegExp pattern expression. Expected value is /regexp/ for inline patterns or regexp for patterns defined as scope expressions.
  - ngChange    = options.ngChange    || null   // Angular expression to be executed when input changes due to user interaction with the input element.
  - ngTrim      = options.ngTrim      || null   // If set to false Angular will not automatically trim the input. This parameter is ignored for input[type=password] controls, which will never trim the input.

  - ngEmailMessage     = options.ngEmailMessage       || 'Συμπληρώστε το πεδίο με μία σωστή διέυθυνση email'
  - ngNumberMessage    = options.ngNumberMessage      || 'Συμπληρώστε το πεδίο με αριθμούς'

  - isUniqueMessage     = options.isUniqueMessage     || 'Τα στοιχεία που συμπληρώσατε δεν είναι μοναδικά'
  - isEqualMessage      = options.isEqualMessage      || 'Τα στοιχεία που συμπληρώσατε δεν ταιριάζουν'
  - ngRequiredMessage   = options.ngRequiredMessage   || 'Παρακαλώ συμπληρώστε το πεδίο'
  - ngMinlengthMessage  = options.ngMinlengthMessage  || 'Παρακαλώ συμπληρώστε το πεδίο με πάραπανω από ' + ngMinlength +' χαρακτήρες'
  - ngMaxlengthMessage  = options.ngMaxlengthMessage  || 'Παρακαλώ συμπληρώστε το πεδίο μέχρι ' + ngMaxlength +' χαρακτήρες'
  - ngPatternMessage    = options.ngPatternMessage    || 'Παρακαλώ συμπληρώστε το πεδίο σωστά!'

  form-control(class=className+(useLabel=="true"?'':' no-label'))
    case type
      when "checkbox"
        +checkbox(options)
      when "radio"
        +radio-group(options)
      default
        if useLabel=="true"
          label(for='#{name}Input')= label

        case type
          when "textarea"
            +textarea(options)
          when "select"
            +select(options)
          when "select2"
            +select2(options)
          when "dateInput"
            +date-input(options)
          default
            +form-input(options)

        valid-icon
        loader-icon

        if popover
          popover= popover

    +validation-messages(options)